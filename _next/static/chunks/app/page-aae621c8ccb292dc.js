(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8614:(e,t,a)=>{Promise.resolve().then(a.bind(a,3126))},3126:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var l=a(5155),i=a(447),s=a(3391),n=a(5683),o=a(2115),r=a(8829);let c=e=>{let{name:t,type:a,onClick:i,width:s}=e;return(0,l.jsx)("button",{className:"".concat(s," p-3 rounded-xl bg-blue-200 transition ease-in-out hover:bg-blue-300 active:bg-blue-400"),type:a,onClick:i,children:t})},d=e=>{let{title:t,time:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col w-full p-3 rounded-lg text-center bg-sky-200",children:[(0,l.jsx)("span",{children:t}),(0,l.jsx)("span",{className:"text-2xl",children:a})]})},u=e=>{let{formId:t,formTitle:a,formDescription:i,formWorkTime:n,formWorkTimeSec:d,forEditClose:u}=e,[p,m]=(0,o.useState)(a),[x,g]=(0,o.useState)(i),[h,b]=(0,o.useState)(n),[f,y]=(0,o.useState)(d),[k,v]=(0,o.useState)(0),j=(0,s.wA)();return(0,l.jsx)("div",{className:"xl:w-138",onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p.trim().length&&h&&(j((0,r.gp)({formId:t,title:p,description:x,workTime:h,workTimeSec:f,planTime:k})),u())},className:"flex flex-col gap-y-6 p-6 rounded-3xl bg-blue-100 shadow-md",children:[(0,l.jsx)("input",{className:"p-3 rounded-xl bg-blue-200 focus:bg-blue-300",value:p,onChange:e=>m(e.target.value),type:"text",id:"taskTitle",name:"title",placeholder:"Название задачи"}),(0,l.jsxs)("label",{className:"flex gap-x-3",children:[(0,l.jsx)("span",{className:"w-full p-3 rounded-xl text-center bg-blue-300",children:"Время выполнения"}),(0,l.jsx)("input",{className:"p-3 pl-6 rounded-xl text-center bg-blue-200 focus:bg-blue-300",value:h,onChange:e=>{let[t,a]=e.target.value.split(":"),l=3600*Number(t)+60*Number(a);y(l),v(l),b(e.target.value)},type:"time",id:"taskTime",name:"workTime"})]}),(0,l.jsx)("textarea",{className:"p-3 rounded-xl bg-blue-200 focus:bg-blue-300",value:x,onChange:e=>{g(e.target.value),e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"},id:"taskDescription",name:"description",placeholder:"Введите описание задачи"}),(0,l.jsx)(c,{name:"Ок",type:"submit"}),(0,l.jsx)(c,{name:"Отмена",type:"button",onClick:u})]})})},p=e=>{let{id:t,title:a,description:p,workTimeSec:m,active:x,status:g,planTime:h,isVisible:b,isCompact:f}=e,y=(0,s.wA)();(0,o.useEffect)(()=>{if(!x)return;let e=setInterval(()=>{y((0,r.Eh)({id:t}))},1e3);return()=>clearInterval(e)},[x,y,t]);let[k,v]=(0,o.useState)(!1),j=m<0||m>h?"bg-red-100":"bg-teal-100",w=m>0?"".concat(Math.floor(m/3600).toString().padStart(2,"0"),":").concat(Math.ceil(m%3600/60).toString().padStart(2,"0")):"".concat(-Math.ceil(m/3600).toString().padStart(2,"0"),":").concat(-Math.ceil(m%3600/60).toString().padStart(2,"0")),N="".concat(Math.floor(h/3600).toString().padStart(2,"0"),":").concat(Math.ceil(h%3600/60).toString().padStart(2,"0")),S=()=>{y((0,r.OD)({id:t}))},T=()=>{S(),v(!k)};return b?(0,l.jsxs)("div",{className:"relative flex flex-col gap-y-4 max-h-min p-6 rounded-3xl ".concat(j," ").concat(f?"hover:opacity-75 active:opacity-55 cursor-pointer":""," ").concat(x&&"outline outline-4 outline-indigo-400"," shadow-md"),onClick:()=>{f&&y((0,r.pJ)({id:t,isCompact:!1}))},children:[(0,l.jsx)("h3",{className:"text-center text-lg font-bold ",children:a}),(0,l.jsx)(n.N,{children:!f&&(0,l.jsxs)(i.P.div,{className:"flex flex-col gap-y-4 overflow-hidden",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:[(0,l.jsx)("span",{className:"text-center",children:m})," ",!!p.trim().length&&(0,l.jsx)("p",{className:"p-3 rounded-lg bg-sky-200",children:p}),(0,l.jsx)("span",{className:"text-center",children:"Время выполнения"}),(0,l.jsxs)("div",{className:"flex gap-x-4 ",children:[(0,l.jsx)(d,{title:"План",time:N}),(0,l.jsx)(d,{title:"completed"===g?"Факт":m>0?"Осталось":"Просрочено",time:w})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:["completed"!==g&&(0,l.jsx)(c,{name:x?"Пауза":"new"===g?"Начать":"Продолжить",type:"button",onClick:()=>{y((0,r.LV)({id:t}))}}),(0,l.jsx)(c,{name:"completed"===g?"Вернуть в работу":"Завершить",type:"button",onClick:()=>{y((0,r.Rt)({id:t,workTimeSec:m,planTime:h}))}}),"completed"!==g&&(0,l.jsx)(c,{name:"Изменить",type:"button",onClick:T}),(0,l.jsx)(c,{name:"Свернуть",type:"button",onClick:()=>{y((0,r.pJ)({id:t,isCompact:!0}))}})]}),(0,l.jsx)(c,{name:"Удалить задачу",type:"button",onClick:()=>{y((0,r.vq)({id:t}))}})]})}),k&&(0,l.jsx)(n.N,{children:(0,l.jsx)(i.P.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",onClick:T,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,l.jsx)(u,{formId:t,formTitle:a,formDescription:p,formWorkTime:w,formWorkTimeSec:m,forEditClose:T})},"modalEdit")})]}):null},m=function(e){let{sortBy:t,title:a}=e,o=(0,s.d4)(e=>e.tasks.tasks).filter(e=>{if(t===e.status)return!0});return(0,l.jsxs)(i.P.div,{className:"flex flex-col w-full max-h-min p-6 gap-y-6 rounded-3xl bg-gray-200",initial:{opacity:0,y:-25},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:[(0,l.jsx)("h2",{className:"text-center text-2xl font-bold",children:a}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row xl:flex-col md:justify-between lg:justify-start lg:gap-x-7 flex-wrap gap-y-6",children:(0,l.jsx)(n.N,{children:o.map(e=>(0,l.jsx)(i.P.div,{className:"md:w-[calc(50%-1rem)] lg:w-[calc(33%-1rem)] xl:w-full",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:(0,l.jsx)(p,{id:e.id,title:e.title,description:e.description,workTimeSec:e.workTimeSec,active:e.active,status:e.status,planTime:e.planTime,isVisible:e.isVisible,isCompact:e.isCompact})},e.id))})})]})},x=()=>{let[e,t]=(0,o.useState)(""),[a,n]=(0,o.useState)(""),[c,d]=(0,o.useState)(""),[u,p]=(0,o.useState)(0),[m,x]=(0,o.useState)(0),g=(0,s.wA)();return(0,l.jsxs)(i.P.form,{onSubmit:l=>{if(l.preventDefault(),e.trim().length&&c){let l=new Date().toISOString();console.log(l),g((0,r.XZ)({id:l,title:e,description:a,workTimeSec:u,planTime:m})),t(""),n(""),d("")}},className:"flex flex-col sm:min-w-100 md:min-w-128 xl:min-w-min gap-y-6 p-6 rounded-3xl bg-blue-100 shadow-md",initial:{opacity:0,y:-25},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[(0,l.jsx)("input",{className:"p-3 rounded-xl bg-blue-200 focus:bg-blue-300",value:e,onChange:e=>{e.target.value.length<=500&&t(e.target.value)},type:"text",id:"taskTitle",name:"title",placeholder:"Название задачи"}),(0,l.jsxs)("div",{className:"flex gap-x-3 ",children:[(0,l.jsx)("span",{className:"w-full p-3 rounded-xl bg-blue-300 focus:bg-blue-300",children:"Время выполнения"}),(0,l.jsx)("input",{className:"p-3 pl-6 rounded-xl text-center bg-blue-200 focus:bg-blue-300",value:c,onChange:e=>{let[t,a]=e.target.value.split(":"),l=3600*Number(t)+60*Number(a);p(l),x(l),d(e.target.value)},type:"time",id:"taskTime",name:"workTime"})]}),(0,l.jsx)("textarea",{className:"p-3 rounded-xl bg-blue-200 focus:bg-blue-300",value:a,onChange:e=>{e.target.value.length<=500&&(n(e.target.value),e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px")},id:"taskDescription",name:"description",placeholder:"Введите описание задачи"}),(0,l.jsx)("button",{className:"p-3 rounded-xl bg-blue-200 transition ease-in-out hover:bg-blue-300 active:bg-blue-400",type:"submit",children:"Создать задачу"})]})},g=()=>{let[e,t]=(0,o.useState)(""),a=(0,s.wA)();return(0,l.jsxs)(i.P.form,{onSubmit:t=>{t.preventDefault(),a((0,r.uE)({searchText:e}))},className:"flex gap-x-6 sm:min-w-100 md:min-w-128 p-6 rounded-3xl bg-blue-100 shadow-md",initial:{opacity:0,y:-25},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[(0,l.jsx)("input",{className:" w-full p-3 rounded-xl bg-blue-200 focus:bg-blue-300",value:e,onChange:e=>{let l=e.target.value;t(l),""===l.trim()&&a((0,r.uE)({searchText:""}))},type:"text",id:"searchText",name:"search",placeholder:"Текст поиска"}),(0,l.jsx)(c,{name:"Поиск",type:"submit",width:"w-32"})]})};function h(){return(0,l.jsxs)("div",{className:"flex flex-col items-center min-h-screen h-full p-6 gap-y-6 font-[family-name:var(--font-geist-sans)]",children:[(0,l.jsx)(i.P.h1,{className:"md:min-w-128 p-6 text-center rounded-3xl text-3xl font-bold bg-blue-200 text-sky-700 shadow-md",initial:{opacity:0,y:-25},animate:{opacity:1,y:0},transition:{duration:.3},children:"Менеджер задач"}),(0,l.jsx)(g,{}),(0,l.jsxs)("div",{className:" flex flex-col items-center xl:grid xl:grid-cols-4 xl:items-start gap-6 w-full",children:[(0,l.jsx)(x,{}),(0,l.jsx)(m,{sortBy:"new",title:"Новые задачи"}),(0,l.jsx)(m,{sortBy:"inProcess",title:"Задачи в работе"}),(0,l.jsx)(m,{sortBy:"completed",title:"Завершенные задачи"})]})]})}},8829:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>m,Eh:()=>d,LV:()=>n,OD:()=>o,Rt:()=>r,XZ:()=>i,gp:()=>s,pJ:()=>u,uE:()=>p,vq:()=>c});let l=(0,a(8943).Z0)({name:"tasks",initialState:{tasks:[]},reducers:{addTask(e,t){e.tasks.push({id:t.payload.id,title:t.payload.title,description:t.payload.description,workTimeSec:t.payload.workTimeSec,active:!1,status:"new",planTime:t.payload.planTime,isVisible:!0,isCompact:!0})},editTask(e,t){e.tasks.forEach(e=>{e.id===t.payload.formId&&(e.title=t.payload.title,e.description=t.payload.description,e.workTimeSec!==t.payload.workTimeSec&&(e.workTimeSec=t.payload.workTimeSec,e.planTime=t.payload.planTime,e.status="new"))})},activateTask(e,t){e.tasks.forEach(e=>{e.id===t.payload.id&&(!1===e.active?e.active=!0:e.active=!1,"inProcess"!==e.status&&(e.status="inProcess"))})},deactivateTask(e,t){e.tasks.forEach(e=>{e.id===t.payload.id&&(e.active=!1)})},completeTask(e,t){e.tasks.forEach(e=>{e.id===t.payload.id&&("completed"!==e.status?e.status="completed":e.status="inProcess",e.active=!1,e.workTimeSec=t.payload.planTime-t.payload.workTimeSec)})},deleteTask(e,t){e.tasks=e.tasks.filter(e=>e.id!==t.payload.id)},updateWorkTime(e,t){e.tasks.forEach(e=>{e.id===t.payload.id&&(e.workTimeSec=e.workTimeSec-1)})},compactTask(e,t){e.tasks.forEach(e=>{e.id===t.payload.id&&(e.isCompact=t.payload.isCompact)})},searchTask(e,t){let a=t.payload.searchText.toLowerCase();e.tasks.forEach(e=>{!a.trim().length||e.title.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)?e.isVisible=!0:e.isVisible=!1})}}}),{addTask:i,editTask:s,activateTask:n,deactivateTask:o,completeTask:r,deleteTask:c,updateWorkTime:d,compactTask:u,searchTask:p}=l.actions,m=l.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[505,717,441,517,358],()=>t(8614)),_N_E=e.O()}]);